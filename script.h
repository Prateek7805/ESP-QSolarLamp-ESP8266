const char _script[] PROGMEM = R"=====(
const d=e=>document.getElementById(e),ae=(e,t,r)=>{e.addEventListener(t,r)};var ermid=null;const HOST=window.location.origin,TIMEOUT_DELAY=8e3,vdt=e=>{let{dn:t,dp:r,sn:n,sp:s}=e;return t.length<8||t.length>20||t.includes(" ")||!t.match(/^[^!#;+\]\/"\t][^+\]"\t]*$/)?{err:!0,msg:"Invalid Device Name"}:r.length<8||r.length>20||!r.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+{}\[\]:;<>,.?~=-])[A-Za-z\d!@#$%^&*()_+{}\[\]:;<>,.?~=-]+$/)?{err:!0,msg:"Invalid Device Password"}:0!==n.length&&n.match(/^[^!#;+\]\/"\t][^+\]"\t]{0,31}$/)&&0!==s.length&&s.match(/^[\u0020-\u007e]{8,63}$/)?{err:!1}:{err:!0,msg:"Invalid STA SSID"}},rerr=()=>{let e=d("ID_ERR_MSG"),t=d("ID_ERR_BG");e.innerText="",t.classList.remove("err_disp"),ermid=null},derr=e=>{let t=d("ID_ERR_MSG"),r=d("ID_ERR_BG");if(t.innerText=e,null===ermid){r.classList.add("err_disp"),ermid=setTimeout(rerr,8e3);return}clearTimeout(ermid),ermid=setTimeout(rerr,8e3)},hBtn=e=>{let t=d("ID_SUBMIT");t.disabled=e,e?t.classList.add("btn-disabled"):t.classList.remove("btn-disabled")},__pf=e=>fetch(`${HOST}/update`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(e=>(hBtn(!1),e.ok||(console.log(`HTTP error! Status : ${e.status}`),derr(`HTTP error! Status : ${e.status}`)),e.text())).then(e=>{derr(e)}).catch(e=>{hBtn(!1),console.log(e),derr(e)}),s_creds=()=>{hBtn(!0);let e=d("ID_DEVICE_NAME").value,t=d("ID_DEVICE_PASS").value,r=d("ID_STA_SSID").value,n=d("ID_STA_PASS").value,s={dn:e,dp:t,sn:r,sp:n},a=vdt(s);if(a.err){hBtn(!1),derr(a.msg);return}__pf(s)},_settings=e=>{fetch(`${HOST}/reset`).catch(e=>derr(e)),derr("Restarting... to apply the changes")};ae(document,"DOMContentLoaded",()=>{ae(d("ID_SUBMIT"),"click",s_creds),ae(d("ID_ALL_RESET"),"click",_settings)});
)=====";